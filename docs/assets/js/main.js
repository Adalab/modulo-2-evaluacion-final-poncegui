"use strict";const input=document.querySelector(".js_inputUser"),btnSearch=document.querySelector(".js_btnSearch"),imageError="https://via.placeholder.com/100x75?text=Ups!+we+are+not+perfect",colors=document.querySelectorAll(".js-favorite"),messageError=document.querySelector(".js-messageError"),templateFavorites=document.getElementById("template-favorites").content,templateCard=document.getElementById("template-card").content,fragmentList=document.createDocumentFragment(),listMovies=document.querySelector(".js_results"),listFav=document.querySelector(".js_favorites");let tvSerieslist=[],fav=[];function handleSearch(e){e.preventDefault();const t=input.value;fetch("https://api.jikan.moe/v3/search/anime?q="+t).then(e=>e.json()).then(t=>{tvSerieslist=t.results,null==tvSerieslist?(renderError(),input.value="",handleSearch(e)):renderAnimeTvShows()})}function renderError(){messageError.innerHTML="Sorry! not found. Let's try another movie"}function renderAnimeTvShows(){listMovies.innerHTML="",tvSerieslist.forEach(e=>{templateCard.querySelector("h5").textContent=e.title,templateCard.querySelector("img").setAttribute("src",e.image_url),templateCard.querySelector(".js-favorite").dataset.id=e.mal_id;const t=templateCard.cloneNode(!0);fragmentList.appendChild(t)}),listMovies.appendChild(fragmentList),console.log(fragmentList);document.querySelector(".js_btnReset").addEventListener("click",e=>{e.preventDefault,listMovies.innerHTML="",input.value="",messageError.innerHTML=""})}const favorite=e=>{e.target.classList.contains("js-favorite")&&setFavorite(e.target.parentElement);e.target.parentElement.classList.toggle("js-colors"),e.stopPropagation()},setFavorite=e=>{const t={id:e.querySelector(".js-favorite").dataset.id,title:e.querySelector("h5").textContent,image_url:e.querySelector("img").src};fav[t]={...t},renderFav()},renderFav=()=>{Object.values(fav).forEach(e=>{templateFavorites.querySelector("h5").textContent=e.title,templateFavorites.querySelector("img").src=e.image_url;const t=templateFavorites.cloneNode(!0);fragmentList.appendChild(t)}),listFav.appendChild(fragmentList),console.log(listFav);document.querySelector(".js-removeAll").addEventListener("click",()=>{listFav.innerHTML=""})},getLocalstorageFav=()=>{const e=localStorage.getItem("fav");null!==e&&(fav=JSON.parse(e))};getLocalstorageFav();const setLocalStorageFav=()=>{const e=JSON.stringify(fav);localStorage.setItem("fav",e)};setLocalStorageFav(),console.log(fav),btnSearch.addEventListener("click",handleSearch),listMovies.addEventListener("click",e=>{favorite(e)});